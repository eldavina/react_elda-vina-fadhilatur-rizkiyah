<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Create Product</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head>
    </head>
    <body>
        <!-- Header -->
        <header>
            <nav class="navbar navbar-expand-lg bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">Simple Header</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div id="nav-items-right">
                        <a href="#" class="btn btn-primary mx-1">Home</a>
                        <a href="#" class="text-decoration-none mx-1">Features</a>
                        <a href="#" class="text-decoration-none mx-1">Pricing</a>
                        <a href="#" class="text-decoration-none mx-1">FAQs</a>
                        <a href="#" class="text-decoration-none mx-1">About</a>
                    </div>
                </div>
            </nav>
        </header>
        <!-- Akhir Header -->


        <!-- Main -->
        <main>
            <div class="container">
                <div class="row">

                    <!-- Judul & Logo -->
                    <div class="col-lg-8 mx-auto p-5">
                        <div class="text-center">
                            <img src="https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-logo.svg" width="71.53px">
                            <h1 class="text-center" style="font-size: 31px;"> Create Product</h1>
                            <span class="text-center text-dark">
                                Below is an example form built entirely with Bootstrap's form controls.
                                Each required form group has a validation state that can be triggered
                                by attempting to submit the form without completing it. <br />
                            </span>
                        </div>
                    </div>
                    <!-- Akhiir Judul & Logo -->

                    <!-- Form -->
                    <div class="container">
                        <div class="row">
                            <div class="row justify-content-center">
                                <div class="col-5">
                                    <div class="col">
                                        <form class="justify-content-end needs-validation" id="form" novalidate>
                                            <h2 style="font-size: 23px;">Detail Product</h2>
                                            <!-- Product Name -->
                                            <div class="mb-3 col-6">
                                                <label for="name" class="form-label">Product Name </label>
                                                <input type="text" class="form-control" id="name" required>
                                                <div class="invalid-feedback">
                                                    Please fill out this field
                                                </div>
                                            </div>
                                            <!-- Product Category -->
                                            <div class="mb-3 col-5">
                                                <label for="category" class="form-label">Product Category </label>
                                                <select class="form-select" aria-label="productcategory"
                                                    aria-placeholder="Choose...." id="category" required>
                                                    <option value="A">A</option>
                                                    <option value="B">B</option>
                                                    <option value="C">C</option>
                                                </select>
                                                <div class="invalid-feedback">
                                                    Please choose a Product Category
                                                </div>
                                            </div>
                                            <!-- Image of Product -->
                                            <div class="mb-3">
                                                <label for="image" class="form-label">Image of Product</label>
                                                <div class="col-6">
                                                    <input class="form-control btn btn-primary " type="file"
                                                        id="image" required>
                                                </div>
                                                <div class="invalid-feedback">
                                                    Please choose an Image
                                                </div>
                                            </div>
                                            <!-- Product Freshness -->
                                            <div class="mb-3">
                                                <label for="freshness" class="form-label">Product Freshness </label>
                                                <div id="form-check has-validation">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="freshness"
                                                            id="freshness" value="Brand New" checked />
                                                        <label class="form-check-label" for="brandnew">
                                                            Brand New
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="freshness"
                                                            id="freshness" value="Second Hand" />
                                                        <label class="form-check-label" for="secondhand">
                                                            Second Hand
                                                        </label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="freshness"
                                                            id="freshness" value="Refurbished" />
                                                        <label class="form-check-label" for="Refurbished">
                                                            Refurbished
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Additional Description-->
                                            <label for="description" class="form-label">Additional Description
                                            </label>
                                            <div class="input-group">
                                                <textarea class="form-control" aria-label="With textarea"
                                                    id="description" required> </textarea>
                                                <div class="invalid-feedback">
                                                    Please fill out this field
                                                </div>
                                            </div>
                                            <!-- Produk Price -->
                                            <label for="productprice" class="form-label">Product Price </label>
                                            <div class="mb-3">
                                                <div class="col-2">
                                                    <input type="number" class="form-control" id="price"
                                                        placeholder="$ 100" required>
                                                </div>
                                                <div class="invalid-feedback">
                                                    Please fill out this field
                                                </div>
                                            </div>
                                            <!-- Submit -->
                                            <div class="col-auto">
                                                <button type="submit" class="btn btn-primary w-100" data-bs-toggle="modal"
                                                    data-bs-target="#submit" id="button-add">Submit</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Akhir Form -->

                    <!-- Section Tabel -->
                    <div style="padding: 20px;">
                        <hr>
                        <h2 style="text-align: center;">List Product</h2>
                        <!-- Form Search & Delete -->
                        <div class="d-flex justify-content-center" style="padding: 20px;">
                            <form class="d-flex" role="search" id="form-search">
                                <input class="form-control" type="search" placeholder="Search by Product Name"
                                    aria-label="Search" id="search">
                                <button class="btn btn-outline-primary" id="button-search">Search</button>
                                <button class="btn btn-danger" id="button-delete">Delete</button>
                            </form>
                        </div>
                        <!-- Akhir Form Search & Delete -->
                        <!-- Tabel Data -->
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Product Name</th>
                                        <th>Product Category</th>
                                        <th>Image of Product</th>
                                        <th>Product Freshness</th>
                                        <th>Additional Description</th>
                                        <th>Product Price</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="datatable">
                                    <!-- Data yang diinput -->
                                </tbody>
                            </table>
                        </div>
                        <!-- Akhir Tabel Data -->
                    </div>
                    <!-- Akhir Section Tabel -->
                </div>
            </div>
        </main>
        <!-- Akhir Main -->

        <!-- Script -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
                crossorigin="anonymous">
        </script>
        <script>
            (() => {
                'use strict'

                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                const forms = document.querySelectorAll('.needs-validation')

                // Loop over them and prevent submission
                Array.from(forms).forEach(form => {
                    form.addEventListener('submit', event => {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
            })()
        </script>
        <script>
            const form          = document.getElementById('form')
            const name          = document.getElementById('name')
            const category      = document.getElementById('category')
            const image         = document.getElementById('image')
            const description   = document.getElementById('description')
            const add           = document.getElementById('button-add')
            const price         = document.getElementById('price')
            const symbol        = /[!@#$%]/

            const search        = document.getElementById('search')
            const btnsearch     = document.getElementById('button-search')
            const datatable     = document.getElementById('datatable')
            const btndelete     = document.getElementById('button-delete')
            const products      = []
            let row

            // Validasi pada button-add. 
            // Akan muncul alert jika data name.value > 25, name.value dan price.value salah, dan saat ada field yang kosong.
            // Jika data yang dimasukkan sudah benar, maka akan menampilkan data hasil olahan function save.
            add.addEventListener('click', function (e) {
                e.preventDefault()
                const freshness = document.querySelector('input[name="freshness"]:checked');

                if (name.value.length > 25) {
                    return alert("Product Name must not be more than 25 characters")
                }
                else if (!name.value) {
                    return alert("Please enter a valid Prouct Name!")
                }
                else if (!price.value) {
                    return alert("Please enter a valid Product Price!")
                }
                else if (name.value) {
                    if (name.value.length > 10) {
                        alert(`Length of the Product Name is ${name.value.length}. Product Name must not exceed 25 characters`)
                    }
                    if (name.value.match(symbol)) {
                        return alert("Product Name must not contain symbol")
                    }
                } 
                else if (!category.value || !freshness || !image.value || !description.value) {
                    return alert(`The field must be filled in`)
                }

                console.log(name.value)
                console.log(category.value)
                console.log(image.value,)
                console.log(freshness)
                console.log(description.value)
                console.log(price.value)

                save(name.value, category.value, image.value, freshness.value, description.value, price.value)
            })

            // function save yang dijalankan saat button-add di klik
            function save(name, category, image, freshness, description, price) {
                datatable.innerHTML = ''
                products.push([name, category, image, freshness, description, price])
                products.forEach((product, i) => {
                    let id = i + 1
                    row = datatable.insertRow();
                    row.insertCell().innerHTML = id
                    product.forEach((item) => {
                        row.insertCell().innerHTML = item
                    })

                })
            }

            // function yang dijalankan saat button-delete di klik.
            // Fungsi ini akan menghapus data terakhir yang diinput
            btndelete.addEventListener('click', function(e) {
                e.preventDefault()
    			const lastRowIndex = products.length - 1;
    			datatable.deleteRow(lastRowIndex);
    			products.pop();
                alert (`Data berhasil dihapus`)
    		})
        
            // Function yang dijalankan saat button-search di klik
            // Fungsi ini akan mencari data search sesuai dengan name.
            btnsearch.addEventListener('click', function(e) {
                e.preventDefault()
    			let searching = false
    			products.forEach((product) => {
    				if (product[0] === search.value) {
    					return searching = true
    				}
    			})
    			if (searching) {
    				alert(`Data ${search.value} tersedia`)
    			} 
                else {
    				alert(`Data ${search.value} tidak tersedia`)
    			}
    		})

            // function validasi untuk button-submit.
            // Butoon-submit tidak dapat diklik apabila data yang dimasukkan belum lengkap
            form.addEventListener('input', function () {
                const valid = form.checkValidity();
                if (valid) {
                    add.removeAttribute('disabled')
                } 
                else {
                    add.setAttribute('disabled', 'disabled')
                }
            })
        </script>
    </body>
</html>